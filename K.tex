\documentclass{ctexart}
\pagestyle{plain}
\begin{document}
\section*{K - 老司机破阵}

可以考虑离线操作，击碎法力元件倒过来也就是加上法力元件的过程.

每次加上一个法力元件的时候，考察与他相邻的法力元件是否已经存在.
存在的话就合并两个集合，更新其和. 
将这个和与当前最大值比较.

时间复杂度 $O(n\alpha(n,n))$.

\end{document}
