\documentclass{ctexart}
\pagestyle{plain}
\begin{document}
\section*{D - Washi与Sonochi的约定}

每个怪物的 $rank(x,y)$ 即为 $(0,0)$ 与 $(x,y)$ 的矩形内点的数量（不包括$(x,y)$）.

可以先将每个怪物的坐标按横坐标从小到大排序，当横坐标相同时按纵坐标从小到大排序.

然后按排序顺序扫描每个坐标，用树状数组维护已扫过坐标中纵坐标比当前点纵坐标小的坐标的个数.

由于已扫过坐标中横坐标均不大于该点坐标，于是上述个数即为该点的 $rank$ 值.
用一个数组记录每个 $rank$ 值出现的次数即可.

再把当前纵坐标加入到树状数组里，直到最后一个点.

时间复杂度 $O(n\log{n})$

\end{document}
